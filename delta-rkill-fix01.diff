--- linux-2.6.13-rc7-vs2.1.0-pre5/kernel/vserver/helper.c	2005-08-26 04:06:10 +0200
+++ linux-2.6.13.1-vs2.1.0-rc2.1/kernel/vserver/helper.c	2005-09-14 23:08:50 +0200
@@ -16,6 +16,7 @@
 #include <linux/reboot.h>
 #include <linux/vs_context.h>
 #include <linux/vs_network.h>
+#include <linux/vserver/signal_cmd.h>
 
 #include <asm/uaccess.h>
 #include <asm/unistd.h>
@@ -106,11 +107,12 @@ long vs_reboot(unsigned int cmd, void * 
 
 	if (vx_info_flags(vxi, VXF_REBOOT_KILL, 0)) {
 		vx_info_kill(vxi, 0, SIGKILL);
-
+		vx_info_kill(vxi, 1, SIGKILL);
+		return 0;
 	} else {
 		ret = vs_reboot_helper(vxi, cmd, arg);
 	}
-	return ret;
+	return ret;
 }
 
 
