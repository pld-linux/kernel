diff -uNr linux/arch/sparc64/config.in linux-2.2.19/arch/sparc64/config.in
--- linux/arch/sparc64/config.in	Sun May 20 18:10:13 2001
+++ linux-2.2.19/arch/sparc64/config.in	Sun May 20 17:39:10 2001
@@ -133,6 +133,7 @@
 	  define_bool CONFIG_IDEDMA_AUTO y
 	  define_bool CONFIG_BLK_DEV_NS87415 y
 	  define_bool CONFIG_BLK_DEV_CMD64X y
+	  define_bool CONFIG_BLK_DEV_IDE_MODES y
 	fi
 fi
 
diff -uNr linux/drivers/block/cmd64x.c linux-2.2.19/drivers/block/cmd64x.c
--- linux/drivers/block/cmd64x.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/cmd64x.c	Sun May 20 17:39:10 2001
@@ -19,9 +19,9 @@
 #include <linux/delay.h>
 #include <linux/init.h>
 #include <linux/hdreg.h>
-#include <linux/ide.h>
 
 #include <asm/io.h>
+#include <linux/ide.h>
 
 #include "ide_modes.h"
 
diff -uNr linux/drivers/block/ide-cd.c linux-2.2.19/drivers/block/ide-cd.c
--- linux/drivers/block/ide-cd.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-cd.c	Sun May 20 17:39:10 2001
@@ -299,13 +299,13 @@
 #include <linux/interrupt.h>
 #include <linux/errno.h>
 #include <linux/cdrom.h>
-#include <linux/ide.h>
 
 #include <asm/irq.h>
 #include <asm/io.h>
 #include <asm/byteorder.h>
 #include <asm/uaccess.h>
 #include <asm/unaligned.h>
+#include <linux/ide.h>
 
 #include "ide-cd.h"
 
diff -uNr linux/drivers/block/ide-disk.c linux-2.2.19/drivers/block/ide-disk.c
--- linux/drivers/block/ide-disk.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-disk.c	Sun May 20 17:39:10 2001
@@ -48,12 +48,12 @@
 #include <linux/genhd.h>
 #include <linux/malloc.h>
 #include <linux/delay.h>
-#include <linux/ide.h>
 
 #include <asm/byteorder.h>
 #include <asm/irq.h>
 #include <asm/uaccess.h>
 #include <asm/io.h>
+#include <linux/ide.h>
 #include <asm/ide.h>
 
 #ifdef CONFIG_BLK_DEV_PDC4030
diff -uNr linux/drivers/block/ide-dma.c linux-2.2.19/drivers/block/ide-dma.c
--- linux/drivers/block/ide-dma.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-dma.c	Sun May 20 17:39:10 2001
@@ -86,10 +86,10 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/init.h>
-#include <linux/ide.h>
 
 #include <asm/io.h>
 #include <asm/irq.h>
+#include <linux/ide.h>
 
 #define CONFIG_BLK_DEV_IDEDMA_TIMEOUT
 
diff -uNr linux/drivers/block/ide-features.c linux-2.2.19/drivers/block/ide-features.c
--- linux/drivers/block/ide-features.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-features.c	Sun May 20 17:39:10 2001
@@ -28,13 +28,13 @@
 #include <linux/pci.h>
 #include <linux/delay.h>
 #include <linux/hdreg.h>
-#include <linux/ide.h>
 
 #include <asm/byteorder.h>
 #include <asm/irq.h>
 #include <asm/uaccess.h>
 #include <asm/io.h>
 #include <asm/bitops.h>
+#include <linux/ide.h>
 
 /*
  * A Verbose noise maker for debugging on the attempted transfer rates.
diff -uNr linux/drivers/block/ide-floppy.c linux-2.2.19/drivers/block/ide-floppy.c
--- linux/drivers/block/ide-floppy.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-floppy.c	Sun May 20 17:39:10 2001
@@ -62,7 +62,6 @@
 #include <linux/genhd.h>
 #include <linux/malloc.h>
 #include <linux/cdrom.h>
-#include <linux/ide.h>
 
 #include <asm/byteorder.h>
 #include <asm/irq.h>
@@ -70,6 +69,7 @@
 #include <asm/io.h>
 #include <asm/unaligned.h>
 #include <asm/bitops.h>
+#include <linux/ide.h>
 
 /*
  *	The following are used to debug the driver.
diff -uNr linux/drivers/block/ide-geometry.c linux-2.2.19/drivers/block/ide-geometry.c
--- linux/drivers/block/ide-geometry.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-geometry.c	Sun May 20 17:53:23 2001
@@ -5,8 +5,8 @@
 #ifdef __i386__
 #include <linux/mc146818rtc.h>
 #endif
-#include <linux/ide.h>
 #include <asm/io.h>
+#include <linux/ide.h>
 
 /*
  * We query CMOS about hard disks : it could be that we have a SCSI/ESDI/etc
diff -uNr linux/drivers/block/ide-pci.c linux-2.2.19/drivers/block/ide-pci.c
--- linux/drivers/block/ide-pci.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-pci.c	Sun May 20 17:39:10 2001
@@ -20,10 +20,10 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/init.h>
-#include <linux/ide.h>
 
 #include <asm/io.h>
 #include <asm/irq.h>
+#include <linux/ide.h>
 
 #define DEVID_PIIXa	((ide_pci_devid_t){PCI_VENDOR_ID_INTEL,   PCI_DEVICE_ID_INTEL_82371FB_0})
 #define DEVID_PIIXb	((ide_pci_devid_t){PCI_VENDOR_ID_INTEL,   PCI_DEVICE_ID_INTEL_82371FB_1})
diff -uNr linux/drivers/block/ide-probe.c linux-2.2.19/drivers/block/ide-probe.c
--- linux/drivers/block/ide-probe.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-probe.c	Sun May 20 17:39:10 2001
@@ -41,12 +41,12 @@
 #include <linux/malloc.h>
 #include <linux/delay.h>
 #include <linux/mc146818rtc.h> /* CMOS defines */
-#include <linux/ide.h>
 
 #include <asm/byteorder.h>
 #include <asm/irq.h>
 #include <asm/uaccess.h>
 #include <asm/io.h>
+#include <linux/ide.h>
 
 static inline void do_identify (ide_drive_t *drive, byte cmd)
 {
diff -uNr linux/drivers/block/ide-proc.c linux-2.2.19/drivers/block/ide-proc.c
--- linux/drivers/block/ide-proc.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-proc.c	Sun May 20 17:39:10 2001
@@ -65,9 +65,9 @@
 #include <linux/mm.h>
 #include <linux/pci.h>
 #include <linux/ctype.h>
-#include <linux/ide.h>
 
 #include <asm/io.h>
+#include <linux/ide.h>
 
 #ifndef MIN
 #define MIN(a,b) (((a) < (b)) ? (a) : (b))
diff -uNr linux/drivers/block/ide-tape.c linux-2.2.19/drivers/block/ide-tape.c
--- linux/drivers/block/ide-tape.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-tape.c	Sun May 20 17:39:10 2001
@@ -411,7 +411,6 @@
 #include <linux/genhd.h>
 #include <linux/malloc.h>
 #include <linux/pci.h>
-#include <linux/ide.h>
 
 #include <asm/byteorder.h>
 #include <asm/irq.h>
@@ -419,6 +418,7 @@
 #include <asm/io.h>
 #include <asm/unaligned.h>
 #include <asm/bitops.h>
+#include <linux/ide.h>
 
 #define NO_LONGER_REQUIRED	(1)
 
diff -uNr linux/drivers/block/ide-taskfile.c linux-2.2.19/drivers/block/ide-taskfile.c
--- linux/drivers/block/ide-taskfile.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide-taskfile.c	Sun May 20 17:39:10 2001
@@ -25,13 +25,13 @@
 #include <linux/pci.h>
 #include <linux/delay.h>
 #include <linux/hdreg.h>
-#include <linux/ide.h>
 
 #include <asm/byteorder.h>
 #include <asm/irq.h>
 #include <asm/uaccess.h>
 #include <asm/io.h>
 #include <asm/bitops.h>
+#include <linux/ide.h>
 
 #define DEBUG_TASKFILE	0	/* unset when fixed */
 
diff -uNr linux/drivers/block/ide.c linux-2.2.19/drivers/block/ide.c
--- linux/drivers/block/ide.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ide.c	Sun May 20 17:39:10 2001
@@ -138,13 +138,13 @@
 #endif /* MODULE */
 #include <linux/pci.h>
 #include <linux/delay.h>
-#include <linux/ide.h>
 
 #include <asm/byteorder.h>
 #include <asm/irq.h>
 #include <asm/uaccess.h>
 #include <asm/io.h>
 #include <asm/bitops.h>
+#include <linux/ide.h>
 
 #include "ide_modes.h"
 
diff -uNr linux/drivers/block/ns87415.c linux-2.2.19/drivers/block/ns87415.c
--- linux/drivers/block/ns87415.c	Sun May 20 18:10:14 2001
+++ linux-2.2.19/drivers/block/ns87415.c	Sun May 20 17:39:10 2001
@@ -17,9 +17,9 @@
 #include <linux/hdreg.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
-#include <linux/ide.h>
 
 #include <asm/io.h>
+#include <linux/ide.h>
 
 static unsigned int ns87415_count = 0, ns87415_control[MAX_HWIFS] = { 0 };
 
