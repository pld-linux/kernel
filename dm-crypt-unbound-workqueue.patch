dm-crypt: use unbound workqueue for request processing

Use unbound workqueue so that work is automatically ballanced between
available CPUs.

Signed-off-by: Mikulas Patocka <mpatocka@redhat.com>

---
 drivers/md/dm-crypt.c |    5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

Index: linux-3.10.4-fast/drivers/md/dm-crypt.c
===================================================================
--- linux-3.12/drivers/md/dm-crypt.c.orig	2013-11-12 11:02:03.770083857 +0100
+++ linux-3.12/drivers/md/dm-crypt.c	2013-11-12 12:03:46.890126367 +0100
@@ -1615,7 +1615,7 @@
 	}
 
 	cc->crypt_queue = alloc_workqueue("kcryptd",
-					  WQ_CPU_INTENSIVE | WQ_MEM_RECLAIM, 1);
+					  WQ_CPU_INTENSIVE | WQ_MEM_RECLAIM | WQ_UNBOUND, num_online_cpus());
 	if (!cc->crypt_queue) {
 		ti->error = "Couldn't create kcryptd queue";
 		goto bad;
