
 Makefile                     |    4 ++--
 drivers/net/wan/pc300_drv.c  |   10 +++++-----
 include/asm-i386/processor.h |    6 ++----
 include/linux/fb.h           |    5 +++--
 net/ipv4/netfilter/ipt_XOR.c |    6 ++----
 5 files changed, 14 insertions(+), 17 deletions(-)

--- a/Makefile	2005-02-13 16:02:05.000000000 +0100
+++ b/Makefile	2005-02-14 20:33:42.643412656 +0100
@@ -203,7 +203,7 @@
 
 HOSTCC  	= gcc
 HOSTCXX  	= g++
-HOSTCFLAGS	= -Wall -Wstrict-prototypes -O2 -fomit-frame-pointer
+HOSTCFLAGS	= -Wall -Wstrict-prototypes -Wno-pointer-sign -O2 -fomit-frame-pointer
 HOSTCXXFLAGS	= -O2
 
 # 	Decide whether to build built-in, modular, or both.
@@ -348,7 +348,7 @@
 
 CPPFLAGS        := -D__KERNEL__ $(LINUXINCLUDE)
 
-CFLAGS 		:= -Wall -Wstrict-prototypes -Wno-trigraphs \
+CFLAGS 		:= -Wall -Wstrict-prototypes -Wno-trigraphs -Wno-pointer-sign \
 	  	   -fno-strict-aliasing -fno-common
 AFLAGS		:= -D__ASSEMBLY__
 
--- a/net/ipv4/netfilter/ipt_XOR.c	2004-12-10 10:54:24.000000000 +0100
+++ b/net/ipv4/netfilter/ipt_XOR.c	2004-12-10 21:53:12.578046056 +0100
@@ -40,8 +40,7 @@
 		tcph = (struct tcphdr *) ((*pskb)->data + iph->ihl*4);
 		for (i=0, j=0; i<(ntohs(iph->tot_len) - iph->ihl*4 - tcph->doff*4); ) {
 			for (k=0; k<=info->block_size; k++) {
-				(char) (*pskb)->data[ iph->ihl*4 + tcph->doff*4 + i ] ^= 
-						info->key[j];
+				(*pskb)->data[ iph->ihl*4 + tcph->doff*4 + i ] ^= info->key[j];
 				i++;
 			}
 			j++;
@@ -52,8 +51,7 @@
 		udph = (struct udphdr *) ((*pskb)->data + iph->ihl*4);
 		for (i=0, j=0; i<(ntohs(udph->len)-8); ) {
 			for (k=0; k<=info->block_size; k++) {
-				(char) (*pskb)->data[ iph->ihl*4 + sizeof(struct udphdr) + i ] ^= 
-						info->key[j];
+				(*pskb)->data[ iph->ihl*4 + sizeof(struct udphdr) + i ] ^= info->key[j];
 				i++;
 			}
 			j++;
--- a/drivers/net/wan/pc300_drv.c	2004-12-24 22:35:29.000000000 +0100
+++ b/drivers/net/wan/pc300_drv.c	2005-02-08 13:49:57.939341600 +0100
@@ -1776,7 +1776,7 @@
 	pc300_t *card = (pc300_t *) chan->card;
 	struct net_device_stats *stats = hdlc_stats(dev);
 	int ch = chan->channel;
-	uclong flags;
+	unsigned long flags;
 	ucchar ilar;
 
 	stats->tx_errors++;
@@ -1804,7 +1804,7 @@
 	pc300_t *card = (pc300_t *) chan->card;
 	struct net_device_stats *stats = hdlc_stats(dev);
 	int ch = chan->channel;
-	uclong flags;
+	unsigned long flags;
 #ifdef PC300_DEBUG_TX
 	int i;
 #endif
@@ -2407,7 +2407,7 @@
 {
 	ucchar ilar;
 	void __iomem *scabase = card->hw.scabase;
-	uclong flags;
+	unsigned long flags;
 
 	tx_dma_buf_check(card, ch);
 	rx_dma_buf_check(card, ch);
@@ -2499,7 +2499,7 @@
 {
 	pc300ch_t *chan = &card->chan[ch];
 	falc_t *pfalc = (falc_t *) & chan->falc;
-	uclong flags;
+	unsigned long flags;
 
 	CPC_LOCK(card, flags);
 	printk("CH%d:   %s %s  %d channels\n",
@@ -3179,7 +3179,7 @@
 	pc300dev_t *d = (pc300dev_t *) dev->priv;
 	pc300ch_t *chan = (pc300ch_t *) d->chan;
 	pc300_t *card = (pc300_t *) chan->card;
-	uclong flags;
+	unsigned long flags;
 
 #ifdef	PC300_DEBUG_OTHER
 	printk("pc300: cpc_close");
--- a/include/asm-i386/processor.h	2005-02-14 20:43:24.000000000 +0100
+++ b/include/asm-i386/processor.h	2005-02-14 21:47:57.564395944 +0100
@@ -85,10 +85,6 @@
 extern struct cpuinfo_x86 boot_cpu_data;
 extern struct cpuinfo_x86 new_cpu_data;
 extern struct tss_struct doublefault_tss;
-#if 0
-DECLARE_PER_CPU(struct tss_struct, init_tss);
-#endif
-extern struct tss_struct init_tss[NR_CPUS];
 
 #ifdef CONFIG_SMP
 extern struct cpuinfo_x86 cpu_data[];
@@ -427,6 +423,8 @@
 	unsigned long stack[64];
 } __attribute__((packed));
 
+extern struct tss_struct init_tss[NR_CPUS];
+
 #define ARCH_MIN_TASKALIGN	16
 
 struct thread_struct {
--- a/include/linux/fb.h	2005-02-14 20:43:19.000000000 +0100
+++ b/include/linux/fb.h	2005-02-14 22:44:26.751502424 +0100
@@ -878,8 +878,6 @@
 extern void fb_destroy_modedb(struct fb_videomode *modedb);
 
 /* drivers/video/modedb.c */
-#define VESA_MODEDB_SIZE 34
-extern const struct fb_videomode vesa_modes[];
 extern void fb_var_to_videomode(struct fb_videomode *mode,
 				struct fb_var_screeninfo *var);
 extern void fb_videomode_to_var(struct fb_var_screeninfo *var,
@@ -929,6 +927,9 @@
 	struct fb_videomode mode;
 };
 
+#define VESA_MODEDB_SIZE 34
+extern const struct fb_videomode vesa_modes[];
+
 extern int fb_find_mode(struct fb_var_screeninfo *var,
 			struct fb_info *info, const char *mode_option,
 			const struct fb_videomode *db,
