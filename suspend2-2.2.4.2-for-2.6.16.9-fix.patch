--- kernel/suspend2-2.2.4.2-for-2.6.16.9/2010-suspend2-freezer-upgrade.patch~	2006-04-15 00:53:29.000000000 +0200
+++ kernel/suspend2-2.2.4.2-for-2.6.16.9/2010-suspend2-freezer-upgrade.patch	2006-04-20 15:22:27.798025712 +0200
@@ -36,7 +36,7 @@
 diff -ruNp 2010-suspend2-freezer-upgrade.patch-old/kernel/power/process.c 2010-suspend2-freezer-upgrade.patch-new/kernel/power/process.c
 --- 2010-suspend2-freezer-upgrade.patch-old/kernel/power/process.c	2006-03-20 17:07:42.000000000 +1000
 +++ 2010-suspend2-freezer-upgrade.patch-new/kernel/power/process.c	2006-04-15 08:52:52.000000000 +1000
-@@ -1,134 +1,422 @@
+@@ -1,133 +1,421 @@
  /*
 - * drivers/power/process.c - Functions for starting/stopping processes on 
 - *                           suspend transitions.
@@ -178,9 +178,8 @@
  	    (p->flags & PF_NOFREEZE) ||
  	    (p->exit_state == EXIT_ZOMBIE) ||
  	    (p->exit_state == EXIT_DEAD) ||
- 	    (p->state == TASK_STOPPED) ||
--	    (p->state == TASK_TRACED))
-+	    (p->state == TASK_TRACED) ||
+-	    (p->state == TASK_STOPPED))
++	    (p->state == TASK_STOPPED) ||
 +	    (!p->mm && !all_freezable))
  		return 0;
  	return 1;
