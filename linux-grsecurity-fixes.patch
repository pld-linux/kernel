--- fs/proc/base.c.org	Fri Apr 19 11:22:32 2002
+++ fs/proc/base.c	Fri Apr 19 11:24:29 2002
@@ -710,13 +710,15 @@
 	get_task_struct(task);
 	inode->u.proc_i.task = task;
 	inode->i_uid = 0;
+#ifndef CONFIG_GRKERNSEC_PROC_USERGROUP
 	inode->i_gid = 0;
+#else
+	inode->i_gid = CONFIG_GRKERNSEC_PROC_GID;
+#endif
 	if (ino == PROC_PID_INO || task_dumpable(task)) {
 		inode->i_uid = task->euid;
 #ifndef CONFIG_GRKERNSEC_PROC_USERGROUP
 		inode->i_gid = task->egid;
-#else
-		inode->i_gid = CONFIG_GRKERNSEC_PROC_GID;
 #endif
 	}
 
