diff -urN linux.orig/vlan.1.0.1/vlan_2.2.patch linux/vlan.1.0.1/vlan_2.2.patch
--- linux.orig/vlan.1.0.1/vlan_2.2.patch	Tue Apr 17 04:51:45 2001
+++ linux/vlan.1.0.1/vlan_2.2.patch	Sun Jan 20 17:30:50 2002
@@ -2390,17 +2390,17 @@
  SUB_DIRS     := core ethernet sched
  MOD_LIST_NAME := NET_MISC_MODULES
  
-@@ -59,6 +59,10 @@
+@@ -66,6 +66,10 @@
+   endif
+ endif
  
- ifeq ($(CONFIG_BRIDGE),y)
- SUB_DIRS += bridge
-+endif
-+
 +ifeq ($(CONFIG_VLAN_802_1Q),y)
 +SUB_DIRS += 802_1Q
- endif
- 
++endif
++
  ifeq ($(CONFIG_IPX),y)
+ SUB_DIRS += ipx
+ # SPX can be still a module
 diff -u -r -N -X /home/greear/exclude.list linux/net/core/dev.c linux.dev/net/core/dev.c
 --- linux/net/core/dev.c	Sun Dec 10 17:49:44 2000
 +++ linux.dev/net/core/dev.c	Sun Jan 14 14:16:43 2001
@@ -2766,15 +2766,6 @@
  }
   
  struct device *dev_alloc(const char *name, int *err)
-@@ -830,7 +1127,7 @@
- 		if(skb==NULL)		
- 			return;
- 			
--		offset=skb->data-skb->mac.raw;
-+		offset = skb->data - skb->mac.raw;
- 		skb_push(skb,offset);	/* Put header back on for bridge */
- 
- 		if(br_receive_frame(skb))
 @@ -956,7 +1253,7 @@
  		}
  
