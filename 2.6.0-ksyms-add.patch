--- linux-2.6.0-test7.org/kernel/Makefile	2003-10-17 14:58:44.000000000 +0200
+++ linux-2.6.0-test7/kernel/Makefile	2003-10-17 14:42:59.000000000 +0200
@@ -12,7 +12,7 @@
 obj-$(CONFIG_GENERIC_ISA_DMA) += dma.o
 obj-$(CONFIG_SMP) += cpu.o
 obj-$(CONFIG_UID16) += uid16.o
-obj-$(CONFIG_MODULES) += module.o
+obj-$(CONFIG_MODULES) += ksyms.o module.o
 obj-$(CONFIG_KALLSYMS) += kallsyms.o
 obj-$(CONFIG_PM) += power/
 obj-$(CONFIG_BSD_PROCESS_ACCT) += acct.o
--- linux-2.6.0-test7.org/kernel/ksyms.c	1970-01-01 01:00:00.000000000 +0100
+++ linux-2.6.0-test7/kernel/ksyms.c	2003-10-17 14:51:04.000000000 +0200
@@ -0,0 +1,64 @@
+#include <linux/config.h>
+#include <linux/slab.h>
+#include <linux/module.h>
+#include <linux/blkdev.h>
+#include <linux/cdrom.h>
+#include <linux/kernel_stat.h>
+#include <linux/vmalloc.h>
+#include <linux/sys.h>
+#include <linux/utsname.h>
+#include <linux/interrupt.h>
+#include <linux/ioport.h>
+#include <linux/serial.h>
+#include <linux/delay.h>
+#include <linux/random.h>
+#include <linux/reboot.h>
+#include <linux/pagemap.h>
+#include <linux/sysctl.h>
+#include <linux/hdreg.h>
+#include <linux/skbuff.h>
+#include <linux/genhd.h>
+#include <linux/blkpg.h>
+#include <linux/swap.h>
+#include <linux/pagevec.h>
+#include <linux/ctype.h>
+#include <linux/file.h>
+#include <linux/console.h>
+#include <linux/poll.h>
+#include <linux/mmzone.h>
+#include <linux/mm.h>
+#include <linux/capability.h>
+#include <linux/highuid.h>
+#include <linux/fs.h>
+#include <linux/fs_struct.h>
+#include <linux/uio.h>
+#include <linux/tty.h>
+#include <linux/in6.h>
+#include <linux/completion.h>
+#include <linux/seq_file.h>
+#include <linux/binfmts.h>
+#include <linux/namei.h>
+#include <linux/buffer_head.h>
+#include <linux/root_dev.h>
+#include <linux/percpu.h>
+#include <linux/smp_lock.h>
+#include <linux/dnotify.h>
+#include <linux/mount.h>
+#include <linux/ptrace.h>
+#include <linux/time.h>
+#include <linux/backing-dev.h>
+#include <linux/percpu_counter.h>
+#include <asm/checksum.h>
+
+#if defined(CONFIG_PROC_FS)
+#include <linux/proc_fs.h>
+#endif
+#ifdef CONFIG_KMOD
+#include <linux/kmod.h>
+#endif
+
+EXPORT_SYMBOL(percpu_counter_mod);
+
+// for jffs
+EXPORT_SYMBOL(set_special_pids);
+
