diff -urN suspend2-2.2.5-for-2.6.16.9.org/2000-workqueue-freezing.patch suspend2-2.2.5-for-2.6.16.9/2000-workqueue-freezing.patch
--- suspend2-2.2.5-for-2.6.16.9.org/2000-workqueue-freezing.patch	2006-02-25 10:34:01.000000000 +0100
+++ suspend2-2.2.5-for-2.6.16.9/2000-workqueue-freezing.patch	2006-12-29 18:42:42.776597000 +0100
@@ -387,9 +387,9 @@
  	set_current_state(TASK_INTERRUPTIBLE);
  
 @@ -456,7 +455,7 @@ static int __devinit cpu_callback(struct
+ 
+ 	switch (action) {
  	case CPU_UP_PREPARE:
- 		BUG_ON(per_cpu(tasklet_vec, hotcpu).list);
- 		BUG_ON(per_cpu(tasklet_hi_vec, hotcpu).list);
 -		p = kthread_create(ksoftirqd, hcpu, "ksoftirqd/%d", hotcpu);
 +		p = kthread_nofreeze_create(ksoftirqd, hcpu, "ksoftirqd/%d", hotcpu);
  		if (IS_ERR(p)) {
