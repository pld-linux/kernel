--- vlan.1.0.1/vlan_2.4.patch~	Tue Apr 17 06:51:45 2001
+++ vlan.1.0.1/vlan_2.4.patch	Mon May 28 17:17:21 2001
@@ -2308,9 +2308,9 @@
 --- linux/net/Makefile	Fri Dec 29 15:07:24 2000
 +++ linux.dev/net/Makefile	Sun Apr 15 14:48:09 2001
 @@ -44,6 +44,7 @@
- subdir-$(CONFIG_ATM)		+= atm
  subdir-$(CONFIG_DECNET)		+= decnet
  subdir-$(CONFIG_ECONET)		+= econet
+ subdir-$(CONFIG_IPSEC)		+= ipsec
 +subdir-$(CONFIG_VLAN_8021Q)           += 8021q
  

diff -uNr vlan.1.0.1.orig/vlan_2.2.patch vlan.1.0.1/vlan_2.2.patch
--- vlan.1.0.1.orig/vlan_2.2.patch	Tue Apr 17 06:51:45 2001
+++ vlan.1.0.1/vlan_2.2.patch	Sat Jun 23 20:32:09 2001
@@ -2385,15 +2385,16 @@
  MOD_SUB_DIRS := ipv4
  ALL_SUB_DIRS := 802 ax25 bridge core ethernet ipv4 ipv6 ipx unix appletalk \
  		netrom rose lapb x25 wanrouter netlink sched packet sunrpc \
--		econet irda #decnet
-+		econet irda 802_1Q #decnet
+-		econet irda atm #decnet
++		econet irda atm 802_1Q #decnet
  SUB_DIRS     := core ethernet sched
  MOD_LIST_NAME := NET_MISC_MODULES
  
-@@ -59,6 +59,10 @@
- 
- ifeq ($(CONFIG_BRIDGE),y)
- SUB_DIRS += bridge
+@@ -62,6 +62,10 @@
+ else 
+   ifeq ($(CONFIG_BRIDGE),m)
+     MOD_SUB_DIRS += bridge
+   endif
 +endif
 +
 +ifeq ($(CONFIG_VLAN_802_1Q),y)
@@ -2766,15 +2767,6 @@
  }
   
  struct device *dev_alloc(const char *name, int *err)
-@@ -830,7 +1127,7 @@
- 		if(skb==NULL)		
- 			return;
- 			
--		offset=skb->data-skb->mac.raw;
-+		offset = skb->data - skb->mac.raw;
- 		skb_push(skb,offset);	/* Put header back on for bridge */
- 
- 		if(br_receive_frame(skb))
 @@ -956,7 +1253,7 @@
  		}
  
