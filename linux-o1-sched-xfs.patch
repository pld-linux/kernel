--- linux/fs/xfs/pagebuf/page_buf.c.orig	Tue Jun 11 17:33:57 2002
+++ linux/fs/xfs/pagebuf/page_buf.c	Tue Jun 11 17:34:50 2002
@@ -2181,8 +2181,7 @@
 				printk("pagebuf_daemon_start failed\n");
 			} else {
 				while (!pb_daemons[cpu_logical_map(cpu)]) {
-					current->policy |= SCHED_YIELD;
-					schedule();
+					yield();
 				}
 			}
 		}
